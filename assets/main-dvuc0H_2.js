import{i as G,a as V}from"./vendor-BRPE7r0H.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".nav-link");let t=window.location.pathname.split("/").pop();t!=="index.html"&&t!=="favorites.html"&&(t="index.html"),e.forEach(n=>{n.getAttribute("href")===t&&n.classList.add("active")})});const L=document.querySelector(".js-header"),A=document.querySelector("main"),O="is-scrolling",W=e=>{e?L.classList.add(O):L.classList.remove(O)},z=e=>{e?A.style.marginTop=`${L.offsetHeight}px`:A.style.marginTop=0},B=()=>{let e=window.scrollY>L.offsetTop;W(e),z(e)};document.addEventListener("DOMContentLoaded",()=>{B(),document.addEventListener("scroll",B)});const i=(e,t,n,r)=>{G.show({message:e,drag:!0,close:!1,timeout:5e3,position:"bottomRight",messageColor:"#2a2a2a",closeOnClick:!0,animateInside:!0,backgroundColor:n??"#f4f4f4",title:t??""})};async function X(){try{return await(await fetch("https://your-energy.b.goit.study/api/quote")).json()}catch{return i("Error fetching the quote:","Error âŒ"),null}}function K(e){const t=new Date().toISOString().split("T")[0];localStorage.setItem("dailyQuote",JSON.stringify({quote:e,date:t}))}function Z(){const e=localStorage.getItem("dailyQuote");return e?JSON.parse(e):null}async function ee(){const e=Z(),t=new Date().toISOString().split("T")[0];if(e&&e.date===t)return e.quote;{const n=await X();return n?(K(n),n):e?e.quote:null}}async function te(){const e=await ee();if(e){const t=e.quote,n=e.author;document.querySelector(".quote").textContent=t,document.querySelector(".quote-author").textContent=n}}te();const _=()=>JSON.parse(localStorage.getItem("favorites"))||[];function ne(e){if(!e._id){i("Exercise ID is missing.","Error âŒ");return}const t=_();t.find(n=>n._id===e._id)?i("This exercise is already in your favorites.","Error âŒ"):(t.push(e),localStorage.setItem("favorites",JSON.stringify(t)),i("Exercise added to favorites!","Success âœ…"))}function F(e,t){if(!e){i("Exercise ID is missing.","Error âŒ");return}const n=_();if(!n.find(r=>r._id===e))i("This exercise is not in your favorites.","Error âŒ");else{const r=n.filter(o=>o._id!==e);localStorage.setItem("favorites",JSON.stringify(r)),i("Exercise removed from favorites!","Success âœ…"),t&&t()}}const m="https://your-energy.b.goit.study/api",f=async(e,t,n)=>{const s=await fetch(e,{headers:{"Content-type":"application/json"},method:t,body:n});if(!s.ok)throw new Error(`Error: status: ${s.status}, ${s.statusText}`);return s.json()},oe={async getExercises(e){const t=new URLSearchParams(e),n=`${m}/exercises?${t}`;return await f(n)},async getExercisesId(e){const t=`${m}/exercises/${e}`;return await f(t)},async editExercisesIdRating(e,t){const n="PATCH",r=`${m}/exercises/${e}/rating`,o=JSON.stringify(t);return await f(r,n,o)},async getExercisesFilter(e){const t=new URLSearchParams(e),n=`${m}/filters?${t}`;return await f(n)},async getExercisesQuote(){const e=`${m}/quote`;return await f(e)},async addSubscription(e){const t="POST",n=`${m}/subscription`,r=JSON.stringify(e);return await f(n,t,r)}},D=V.create({baseURL:m,headers:{"Content-type":"application/json"}}),g="/project-ilurgym2/assets/icons-BUPRkBTg.svg",p={MUSCLES:"Muscles",BODY_PARTS:"Body parts",EQUIPMENT:"Equipment"},y={EXERCISE:"exercises",CATEGORY:"categories"},j=768;let q=p.MUSCLES,T=null;document.addEventListener("DOMContentLoaded",async()=>{if(document.getElementById("favorites"))M();else{const{categories:t,page:n,totalPages:r}=await k(p.MUSCLES);$(t),v(y.CATEGORY,n,r,p.MUSCLES),re()}});const re=()=>{const e=document.querySelectorAll(".filter-btn");e.forEach(t=>{t.addEventListener("click",async()=>{e.forEach(a=>a.classList.remove("active")),t.classList.add("active");const n=t.getAttribute("data-filter"),{categories:r,page:o,totalPages:s}=await k(n);$(r),v(y.CATEGORY,o,s,n)})})},k=async(e,t=1)=>{const n=window.innerWidth<j?9:12;try{const o=(await D.get("/filters",{params:{filter:e,page:t,limit:n}})).data;return o.results?{categories:o.results,page:Number(o.page),totalPages:Number(o.totalPages)}:{categories:[],page:1,totalPages:1}}catch(r){return i(`Error fetching categories: ${r}`,"Error âŒ"),{categories:[],page:1,totalPages:1}}},I=async(e,t,n=1,r=null)=>{const o=window.innerWidth<j?8:10;try{const a=(await D.get("/exercises",{params:{page:n,limit:o,...e===p.MUSCLES&&{muscles:t},...e===p.BODY_PARTS&&{bodypart:t},...e===p.EQUIPMENT&&{equipment:t},...r&&{keyword:r}}})).data;return a.results?{exercises:a.results,page:Number(a.page),totalPages:Number(a.totalPages)}:{exercises:[],page:1,totalPages:1}}catch(s){return i(`Error fetching categories: ${s}`,"Error âŒ"),{exercises:[],page:1,totalPages:1}}},$=e=>{const t=document.querySelector(".exercises-grid");if(!t)return;if(t.innerHTML="",H(!1),U(!1),e.length===0){t.innerHTML="<p>No categories found.</p>";return}const n=document.createDocumentFragment();e.forEach(r=>{const o=document.createElement("div");o.classList.add("category-card"),o.innerHTML=`
      <img src="${r.imgURL}" alt="${r.name}" />
      <h3>${r.name}</h3>
      <p>${r.filter}</p>
    `,o.addEventListener("click",async()=>{const{exercises:s,page:a,totalPages:c}=await I(r.filter,r.name);q=r.filter,T=r.name,C(s),v(y.EXERCISE,a,c,r.filter)}),n.appendChild(o)}),t.appendChild(n)},se=e=>`
  <div class="rating">
    <span>
      ${e}
    </span>
    <svg class="icon-star">
      <use href="${g}#icon-star"></use>
    </svg>
  </div>
`,ae=e=>`
  <button class="trash-btn" data-id="${e}">
    <svg width="16px" height="16px">
      <use href="${g}#icon-trash"></use>
    </svg>
  </button>
`,C=(e,t=!1)=>{const n=document.querySelector(".exercises-grid");if(!n)return;if(n.innerHTML="",H(!0),U(!0,T),e.length===0){n.innerHTML="<p>No exercises found.</p>";return}const r=e.map(({bodyPart:o,burnedCalories:s,target:a,name:c,rating:d,_id:u})=>`
    <div class="exercise-card">
      <div class="exercise-card-header">
        <div class="label">WORKOUT</div>
        ${t?ae(u):se(d)}
        <button class="start-btn" data-id="${u}">
          Start
          <svg class="icon-arrow">
            <use href="${g}#icon-arrow-start"></use>
          </svg>
        </button>
      </div>
      <div class="title-wrapper">
        <div class="icon-run-exercises">
          <svg class="icon-run">
            <use href="${g}#icon-run"></use>
          </svg>
        </div>
        <div class="title">${c}</div>
      </div>
      <div class="details">
        <div class="details-item">
          Burned calories: <span>${s}</span>
        </div>
        <div class="details-item">
          Body part: <span>${o}</span>
        </div>
        <div class="details-item">
          Target:<span>${a}</span>
        </div>
      </div>
    </div>
  `).join(" ");n.insertAdjacentHTML("afterbegin",r),document.querySelectorAll(".exercise-card .start-btn").forEach(o=>{const s=o.getAttribute("data-id");s?o.addEventListener("click",()=>{ie(s)}):i("Exercise ID is missing.","Error âŒ")}),document.querySelectorAll(".trash-btn").forEach(o=>{const s=o.getAttribute("data-id");s?o.addEventListener("click",()=>{F(s,M)}):i("Exercise ID is missing.","Error âŒ")})},v=(e,t,n,r)=>{const o=document.getElementById("pagination");if(!o||(o.innerHTML="",n<=1))return;const s=document.createDocumentFragment();for(let a=1;a<=n;a++){const c=document.createElement("div");c.innerText=a,c.className=a===t?"page current":"page",c.addEventListener("click",async()=>{if(e===y.CATEGORY){const{categories:d}=await k(r,a);$(d),v(e,a,n,r)}else{const{exercises:d}=await I(r,null,a);C(d),v(e,a,n,r)}}),s.appendChild(c)}o.appendChild(s)},M=()=>{const e=document.querySelector(".exercises-grid"),t=_();t.length>0?C(t,!0):e.innerHTML=`<p class="empty-favorites">It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>`},H=e=>{const t=document.getElementById("search-form");t&&(t.style.display=e?"block":"none",e?t.addEventListener("submit",N):t.removeEventListener("submit",N))},N=async e=>{e.preventDefault();const t=document.getElementById("search-input"),n=t.value.trim();if(t.value="",n==="")return;const{exercises:r}=await I(q,T,1,n);C(r),v(y.EXERCISE,1,1,q)},U=(e,t="")=>{const n=document.querySelector(".exercises-header-span"),r=document.querySelector(".exercises-subcategory");!n||!r||(n.style.display=e?"flex":"none",r.textContent=t)};function ie(e,t){fetch(`https://your-energy.b.goit.study/api/exercises/${e}`).then(n=>{if(!n.ok)throw new Error("Failed to fetch exercise details.");return n.json()}).then(n=>{me(n),ge()}).catch(n=>{i(`Error fetching exercise details: ${n}`,"Error âŒ")})}function ce(){const e=document.querySelector(".modal__block").getAttribute("data-id");if(e){E();const t=document.getElementById("ratingModal");t?(Q(),t.setAttribute("data-exercise-id",e),t.classList.add("is-visible"),console.log(`Rating modal opened for exercise ID: ${e}`),de()):console.error("Rating modal element not found.")}else console.error("Exercise ID is missing when trying to open the rating modal.")}document.addEventListener("click",function(e){e.target.closest(".rating-modal__exit")&&h()});document.addEventListener("click",function(e){const t=document.getElementById("ratingModal"),n=document.querySelector(".rating-modal__block");t.classList.contains("is-visible")&&t&&!n.contains(e.target)&&h()});document.addEventListener("keydown",function(e){e.key==="Escape"&&h()});document.addEventListener("click",function(e){e.target.matches(".rating-modal__cancel-btn")&&h()});function h(){const e=document.getElementById("ratingModal");e?(e.classList.remove("is-visible"),console.log("Rating modal is now hidden."),Q()):console.error("Rating modal element is missing.")}function le(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase())}function de(){const e=document.querySelector(".rating-modal__stars");if(!e){console.error("Rating stars container not found.");return}const t=e.querySelectorAll("span");if(t.length===0){console.error("No star elements found for rating.");return}t.forEach((n,r)=>{n.addEventListener("click",function(){t.forEach(a=>a.classList.remove("selected"));for(let a=0;a<=r;a++)t[a].classList.add("selected");const o=r+1,s=document.querySelector(".rating-modal__value");s?(s.textContent=o.toFixed(1),s.setAttribute("data-selected-rating",o),console.log(`Selected star rating: ${o}`)):console.error(".rating-modal__value element not found")})})}function Q(){const e=document.querySelector(".rating-modal__email"),t=document.querySelector(".rating-modal__comment"),n=document.querySelectorAll(".rating-modal__stars span"),r=document.querySelector(".rating-modal__value");e?e.value="":console.error(".rating-modal__email element not found"),t?t.value="":console.error(".rating-modal__comment element not found"),n.length>0?n.forEach(o=>o.classList.remove("selected")):console.error("No star elements found for rating"),r?(r.textContent="0.0",r.removeAttribute("data-selected-rating")):console.error(".rating-modal__value element not found")}document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){var t,n,r;if(e.target.matches(".rating-btn")&&(console.log("Rating button clicked"),ce()),e.target.matches(".rating-modal__submit-btn")){console.log("Submit Rating button clicked");const o=document.getElementById("ratingModal"),s=o==null?void 0:o.getAttribute("data-exercise-id");if(console.log(`Submitting rating for exercise ID: ${s}`),!s){alert("Exercise ID is missing.");return}const a=(t=document.querySelector(".rating-modal__value"))==null?void 0:t.getAttribute("data-selected-rating");if(!a){alert("Please select a rating.");return}const c=(n=document.querySelector(".rating-modal__email"))==null?void 0:n.value.trim(),d=(r=document.querySelector(".rating-modal__comment"))==null?void 0:r.value.trim();if(!a||!c||!d){alert("Please fill out all fields.");return}if(!le(c)){alert("Please enter a valid email address.");return}const u={rate:Number(a),email:c,review:d};console.log("Request data:",u),fetch(`https://your-energy.b.goit.study/api/exercises/${s}/rating`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(l=>(console.log("Response status:",l.status),l.status===409?l.json().then(S=>{throw new Error(`Rating already submitted with this email: ${S.message}`)}):l.ok?l.json():l.json().then(S=>{throw new Error(`Failed to submit rating: ${S.message}`)}))).then(l=>{i("Thank you for your feedback","Done âœ…"),h()}).catch(l=>{l.message.includes("Rating already submitted with this email")?i("You have already submitted a rating using this email address.","Error âŒ"):(console.error("Error submitting rating:",l),i("Error submitting rating. Please try again later.","Error âŒ"))})}})});const ue=e=>{const t=Math.floor(e),n=e%1>=.5,r=Array(t).fill(`<svg class="icon-star"><use href="${g}#icon-star"></use></svg>`),o=Array(5-t-(n?1:0)).fill(`<svg class="icon-star"><use href="${g}#icon-star-empty"></use></svg>`),s=n?`<svg class="icon-star-half"><use href="${g}#icon-star-half"></use></svg>`:"";return`
    ${r.join("")}
    ${s}
    ${o.join("")}
  `};function me(e){const t=document.querySelector(".modal-title"),n=document.querySelector(".modal-image"),r=document.querySelector(".modal-target"),o=document.querySelector(".modal-bodyPart"),s=document.querySelector(".modal-equipment"),a=document.querySelector(".modal-calories"),c=document.querySelector(".modal__description"),d=document.querySelector(".modal__block"),u=document.querySelector(".modal__rating");d.setAttribute("data-id",e._id),t.textContent=e.name||"No name available",n.src=e.gifUrl||"",n.alt=e.name||"Exercise image",r.textContent=e.target||"No target available",o.textContent=e.bodyPart||"No body part available",s.textContent=e.equipment||"No equipment available",a.textContent=`${e.burnedCalories||"N/A"}`,c.textContent=e.description||"No description available",u.innerHTML=`
    <span>${e.rating.toFixed(1)}</span>
    <span>${ue(e.rating)}</span>
  `;const l=document.querySelector(".modal__btns"),R=(JSON.parse(localStorage.getItem("favorites"))||[]).find(w=>w._id===e._id);l.innerHTML=`
    <button class="favorites-btn">${R?"Remove":"Add to favorites "}<svg class="fa-heart" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
  <path d="M17.3666 3.84172C16.941 3.41589 16.4356 3.0781 15.8794 2.84763C15.3232 2.61716 14.727 2.49854 14.1249 2.49854C13.5229 2.49854 12.9267 2.61716 12.3705 2.84763C11.8143 3.0781 11.3089 3.41589 10.8833 3.84172L9.99994 4.72506L9.1166 3.84172C8.25686 2.98198 7.0908 2.49898 5.87494 2.49898C4.65907 2.49898 3.49301 2.98198 2.63327 3.84172C1.77353 4.70147 1.29053 5.86753 1.29053 7.08339C1.29053 8.29925 1.77353 9.46531 2.63327 10.3251L3.5166 11.2084L9.99994 17.6917L16.4833 11.2084L17.3666 10.3251C17.7924 9.89943 18.1302 9.39407 18.3607 8.83785C18.5912 8.28164 18.7098 7.68546 18.7098 7.08339C18.7098 6.48132 18.5912 5.88514 18.3607 5.32893C18.1302 4.77271 17.7924 4.26735 17.3666 3.84172Z" stroke="#242424" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg></button>
    <button class="rating-btn">Give a rating</button>
  `;const J=document.querySelector(".favorites-btn"),Y=document.getElementById("favorites");J.addEventListener("click",function(){if(R){const w=Y?M:void 0;F(e._id,w)}else ne(e);E()})}function ge(){const e=document.querySelector(".modal");e?e.classList.add("is-visible"):i("Modal element is missing.","Error âŒ")}function E(){const e=document.querySelector(".modal");e?e.classList.remove("is-visible"):i("Modal element is missing.","Error âŒ")}const P=document.querySelector(".modal-close");P&&P.addEventListener("click",E);document.addEventListener("click",e=>{const t=document.querySelector(".modal"),n=document.querySelector(".modal__block");t&&n&&t.classList.contains("is-visible")&&!n.contains(e.target)&&E()});document.addEventListener("keydown",e=>{e.key==="Escape"&&E()});const b=document.querySelector(".subscribe-form");if(b!==null){b.addEventListener("submit",e);async function e(r){r.preventDefault();const o=r.target.elements.email.value;try{await oe.addSubscription({email:o}),i("You have subscribed ðŸ¥³","Congratulations!","#f4f4f4")}catch{i("Subscription already exists ðŸ˜Š","","#c6cdd1")}finally{r.target.reset(),localStorage.removeItem("subscribe-form-email")}}const t={email:""};(r=>{const o=JSON.parse(localStorage.getItem("subscribe-form-email"));if(o!==null)for(const s in o)o.hasOwnProperty(s)&&(r.elements[s].value=o[s],t[s]=o[s])})(b),b.addEventListener("input",r=>{const o=r.target.name,s=r.target.value.trim();t[o]=s,localStorage.setItem("subscribe-form-email",JSON.stringify(t))})}(()=>{let e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),n=document.querySelector(".js-close-menu"),r=[...document.getElementsByClassName("mobile-menu-link")],o=()=>{let a=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",!a),e.classList.toggle("is-open"),document.body.style.overflow=a?"auto":"hidden"};const s=()=>{window.matchMedia("(max-width: 767px)").matches?(t.addEventListener("click",o),n.addEventListener("click",o),r.forEach(a=>{a.addEventListener("click",o)})):(t.removeEventListener("click",o),n.removeEventListener("click",o),r.forEach(a=>{a.removeEventListener("click",o)}),e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1))};window.addEventListener("resize",s),s()})();const fe=()=>{document.querySelector(".preloader").classList.add("preloader--hidden")};document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{fe()},500)});let x=document.getElementById("myBtn");document.getElementsByClassName(".footer");x&&(x.onclick=function(){ve()});window.onscroll=function(){pe()};function pe(){document.body.scrollTop>20||document.documentElement.scrollTop>20?x.style.display="block":x.style.display="none"}function ve(){document.body.scrollTop=0,document.documentElement.scrollTop=0}
//# sourceMappingURL=main-dvuc0H_2.js.map
